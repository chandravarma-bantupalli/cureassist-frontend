<app-pharmacy-home></app-pharmacy-home>
<h1>Orders</h1>
<div class="pharmacy-orders-page">
  <div class="pharmacy-current-orders">
    <mat-list>
      <mat-list-item (click)="onQuotationRequestSelected(quotationRequest)" *ngFor="let quotationRequest of quotationRequests">
        {{quotationRequest?.prescriptionId}}
      </mat-list-item>
    </mat-list>
  </div>
  <table mat-table [dataSource]="selectedQuotationObject?.prescribedMedicines" class="mat-elevation-z8">
    <!-- Name Column -->
    <ng-container matColumnDef="MedicineName">
      <th mat-header-cell *matHeaderCellDef> Medicine Name </th>
      <td mat-cell *matCellDef="let prescribedMedicine">
        {{prescribedMedicine.medicineName}} </td>
    </ng-container>

    <!-- Dosage Column -->
    <ng-container matColumnDef="PrescribedDosage">
      <th mat-header-cell *matHeaderCellDef> Prescribed Dosage </th>
      <td mat-cell *matCellDef="let prescribedMedicine">
        {{prescribedMedicine.prescribedDosage}} </td>
    </ng-container>

    <!-- Quantity Column -->
    <ng-container matColumnDef="Quantity">
      <th mat-header-cell *matHeaderCellDef> Quantity </th>
      <td mat-cell *matCellDef="let prescribedMedicine">
        {{prescribedMedicine.medicineQuantity}} </td>
    </ng-container>

    <!-- each medicine price -->
    <ng-container matColumnDef="MedicinePrice">
      <th mat-header-cell *matHeaderCellDef> Medicine Price </th>
      <td mat-cell *matCellDef="let prescribedMedicine"> 
        <input type='number' matInput  (keydown.enter)=totalMedicineCost(prescribedMedicine.medicineName,$event) (keydown.backspace)=finalMedicineCost(prescribedMedicine.medicineName,$event)> </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <input matInput placeholder="Total Cost" [(ngModel)]="totalCost" required>
  <button mat-raised-button color="primary" (click)="pharmacyResponseMethod(totalCost)"> Confirm Order </button>
</div>

